<!DOCTYPE html>
<html>

<head>
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="viewport" content="initial-scale=1, width=device-width, viewport-fit=cover">
    <link rel="stylesheet" type="text/css" href="css/index.css">
    <link rel="stylesheet" type="text/css" href="js/jquery-1.5.0.mobile.min.css">
    <link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap.css">
    <!--cordova-->
    <script type="text/javascript" src="cordova.js"></script>
    <script type='text/javascript' src='jquery-3.0.0.js'></script>
    <script type="text/javascript" src="js/jquery-1.11.1.min.js" id="cordova-jquery"></script>
    <!--scripts-->
    <script type="text/javascript" src="js/jquery-1.5.0.mobile.min.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <!--fontawesome-->
    <link rel="stylesheet" type="text/css" href="fontawesome/css/all.css">
    <script type="text/javascript" src="fontawesome/js/all.js"></script>
    <script type="text/javascript" src="bootstrap/js/bootstrap.min.js"></script>
    <!--serializador-->
    <script src="https://code.jquery.com/jquery-3.3.1.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script type="text/javascript" src="js/jquery.serializejson.js"></script>
    <script type="text/javascript" src="aplicacion.js"></script>

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
    <!--estilos adiconales-->
    <style>
        /* For avoiding title truncation in wp8 */
        
        .ui-header .ui-title {
            overflow: visible !important;
        }
        /* For fixing the absolute position issue for the default cordova gen page*/
        
        #cjp-accordion1 .app {
            left: 5px !important;
            margin: 5px !important;
            position: relative !important;
        }
        
        input[type="file"] {
            display: none;
        }
        
        .icono-menu {
            font-size: 18px;
        }
    </style>
    <title>Hello World</title>
</head>

<body>
    <!-- page 1 -->
    <div data-role="page" id="home">
        <div data-role="header">
            <h1>Inicio</h1>
        </div>

        <div class="ui-content">
            <div class="app">
            
               <br>
                <h1>Bienvenido <span id="tNombre"></span></h1>
                <br>
                <div>
                    <table width="100%">
                        <tr>
                            <td valign="top" nowrap="nowrap">Hoy tienes servicio en</td>
                            
                        </tr>
                        <tr>
                            <td id="tdTienda8"></td>
                            <td id="tdSelector"></td>
                        </tr>
                        <tr id="frmSel" hidden>
                            <td colspan="2">
                                <form id="frmSelector" name="frmSelector" >
                    <input type="hidden" name="accion" value="tie-con">
                    <div class="form-group" id="bTienda">
                    </div>
                    <div class="form-group">
                        <input type="button" value="Seleccionar" class="btn btn-info" onclick="cargarTienda()">
                    </div>
                </form>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <button onclick="cerrarSesion()" class="btn btn-info form-control">Cerrar Sesi&oacute;n</button>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
        <!-- end page 1 content -->

        <div data-role="footer" data-position="fixed">
            <div data-role="navbar" class="table-responsive">
                <ul>
                    <li><a href="#con-mov"><i class="icono-menu fas fa-list-alt"></i></a></li>
                    <li><a href="#con-img"><i class="icono-menu far fa-images"></i></a></li>
                    <li><a href="#home" class="ui-btn-active ui-state-persist"><i class="icono-menu fas fa-tachometer-alt"></i></a></li>
                    <li><a href="#upd-img"><i class="icono-menu fas fa-camera"></i></a></li>
                    <li><a href="#reg-mov"><i class="icono-menu fas fa-cart-plus"></i></a></li>
                </ul>
            </div>
            <!-- /navbar -->
        </div>
        <!-- /footer -->
    </div>
    <!-- /page1 -->
    <!-- page 1 -->
    <div data-role="page" id="upd-img">
        <div data-role="header" data-position="fixed">
            <a href="#" class="ui-btn-right"  onclick="enviarDatos('-upd')"><i class="far fa-save"></i></a>
            <h1>Subir Fotograf&iacute;as</h1>
        </div>

        <div class="ui-content">
            <div>
                <form id="datos-upd" name="datos" method="post" enctype="multipart/form-data">
                    <input type="hidden" name="eCodPromotoria" id="eCodPromotoria0">
                    <input type="hidden" name="accion" id="accion" value="img-prm">
                    <input type="hidden" name="eCodUsuario" id="eCodUsuario1">
                    <input type="hidden" name="tLatitud" id="dLatitud1">
                    <input type="hidden" name="tLongitud" id="dLongitud1">
                    <div class="col-lg-12">

                        <div class="card col-lg-12">

                            <div class="card-body card-block">
                                <!--campos-->
                                <div class="form-group" id="tdTienda0">

                                </div>
                                <div class="form-group" id="tdTiposImagenes0">

                                </div>
                                <div class="form-group" style="overflow-y:scroll;">
                                    <table width="100%" id="imagenes">
                                        <tr id="img0">
                                            <td>
                                                <button class="form-control btn btn-info" onclick="guardarImagen('0')">
                                                    <i class="icono-menu fas fa-camera"></i> Tomar/subir Foto
                                                </button>
                                                <input type="hidden" id="imgArchivo0" name="fotos[0][tArchivo]">
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                                <!--colocamos campos de arrastres-->

                                <!--campos-->
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <!-- end page 1 content -->

        <div data-role="footer" data-position="fixed">
            <div data-role="navbar" class="table-responsive">
                <ul>
                    <li><a href="#con-mov"><i class="icono-menu fas fa-list-alt"></i></a></li>
                    <li><a href="#con-img"><i class="icono-menu far fa-images"></i></a></li>
                    <li><a href="#home"><i class="icono-menu fas fa-tachometer-alt"></i></a></li>
                    <li><a href="#upd-img" class="ui-btn-active ui-state-persist"><i class="icono-menu fas fa-camera"></i></a></li>
                    <li><a href="#reg-mov"><i class="icono-menu fas fa-cart-plus"></i></a></li>
                </ul>
            </div>
            <!-- /navbar -->
        </div>
        <!-- /footer -->
    </div>
    <!-- /page1 -->
    <!-- page 1 -->
    <div data-role="page" id="reg-mov">
        <div data-role="header" data-position="fixed">
            <a href="#" class="ui-btn-right"  onclick="enviarDatos('-arr')"><i class="far fa-save"></i></a>
            <h1>Registrar Arrastre</h1>
        </div>

        <div class="ui-content">
            <div style="overflow-y:scroll;">
                <form id="datos-arr" name="datos" method="post" enctype="multipart/form-data">
                    <input type="hidden" name="eCodPromotoria" id="eCodPromotoria1">
                    <input type="hidden" name="accion" id="accion" value="mov-prm">
                    <input type="hidden" name="eCodUsuario" id="eCodUsuario2">
                    <input type="hidden" name="tLatitud" id="dLatitud2">
                    <input type="hidden" name="tLongitud" id="dLongitud2">
                    <div class="col-lg-12">

                        <div class="card col-lg-12">

                            <div class="card-body card-block">
                                <!--campos-->
                                <div class="form-group" id="tdTienda1">

                                </div>
                                <div class="form-group" id="tdProductos1">

                                </div>
                                <div class="form-group">
                                    <label>Presentacion</label>
                                    <select id="eCodPresentacion" name="eCodPresentacion" class="form-control" onchange="consultarArrastres()">
                                        <option value="">Seleccione...</option>
                                    </select>
                                </div>

                                <!--colocamos campos de arrastres-->
                                <div class="form-group">
                                    <label>Inv. Inicial</label>
                                    <input type="text" class="form-control" id="eInicial" name="eInicial">
                                </div>
                                <div class="form-group">
                                    <label>Resurtido</label>
                                    <input type="text" class="form-control" id="eResurtido" name="eResurtido">
                                </div>
                                <div class="form-group">
                                    <label>Inv. Final</label>
                                    <input type="text" class="form-control" id="eFinal" name="eFinal">
                                </div>
                                <div class="form-group">
                                    <label>Precio Venta</label>
                                    <input type="text" class="form-control" id="dPrecioVenta" name="dPrecioVenta">
                                    <br>
                                    <small><i>Solo numeros con decimales. No se admiten signos de pesos</i></small>
                                </div>
                                <!--colocamos campos de arrastres-->

                                <!--campos-->
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <!-- end page 1 content -->

        <div data-role="footer" data-position="fixed">
            <div data-role="navbar" class="table-responsive">
                <ul>
                    <li><a href="#con-mov"><i class="icono-menu fas fa-list-alt"></i></a></li>
                    <li><a href="#con-img"><i class="icono-menu far fa-images"></i></a></li>
                    <li><a href="#home"><i class="icono-menu fas fa-tachometer-alt"></i></a></li>
                    <li><a href="#upd-img"><i class="icono-menu fas fa-camera"></i></a></li>
                    <li><a href="#reg-mov" class="ui-btn-active ui-state-persist"><i class="icono-menu fas fa-cart-plus"></i></a></li>
                </ul>
            </div>
            <!-- /navbar -->
        </div>
        <!-- /footer -->
    </div>
    <!-- /page1 -->
    <!-- page 1 -->
    <div data-role="page" id="con-img">
        <div data-role="header">
            <h1>Consultar Fotos</h1>
        </div>

        <div class="ui-content">
            <div>
                <form id="datos-img" name="datos" method="post" enctype="multipart/form-data">
                    <input type="hidden" name="eCodPromotoria" id="eCodPromotoria2">
                    <input type="hidden" name="accion" id="accion" value="img-con">
                    <input type="hidden" name="eCodUsuario" id="eCodUsuario4">
                    <div class="col-lg-12">

                        <div class="card col-lg-12">

                            <div class="card-body card-block">
                                <!--campos-->
                                <div class="form-group">
                                    <input type="button" class="btn btn-info" value="Consultar" onclick="consultarImagenes()">
                                </div>
                                <div class="form-group" id="tdTienda2">

                                </div>
                                <div class="form-group" id="divXHRIMG">

                                </div>
                                <!--colocamos campos de arrastres-->

                                <!--campos-->
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <!-- end page 1 content -->

        <div data-role="footer" data-position="fixed">
            <div data-role="navbar" class="table-responsive">
                <ul>
                    <li><a href="#con-mov"><i class="icono-menu fas fa-list-alt"></i></a></li>
                    <li><a href="#con-img" class="ui-btn-active ui-state-persist"><i class="icono-menu far fa-images"></i></a></li>
                    <li><a href="#home"><i class="icono-menu fas fa-tachometer-alt"></i></a></li>
                    <li><a href="#upd-img"><i class="icono-menu fas fa-camera"></i></a></li>
                    <li><a href="#reg-mov"><i class="icono-menu fas fa-cart-plus"></i></a></li>
                </ul>
            </div>
            <!-- /navbar -->
        </div>
        <!-- /footer -->
    </div>
    <!-- /page1 -->
    <!-- page 1 -->
    <div data-role="page" id="con-mov">
        <div data-role="header">
            <h1>Consultar Arrastres</h1>
        </div>

        <div class="ui-content">
            <div>
                <!--contenido-->
                <form id="datos-con" name="datos" method="post" enctype="multipart/form-data">
                    <input type="hidden" name="eCodPromotoria" id="eCodPromotoria3">
                    <input type="hidden" name="accion" value="mov-con">
                    <input type="hidden" name="eCodUsuario" id="eCodUsuario0">
                    <div class="col-lg-12">

                        <div class="card col-lg-12">

                            <div class="card-body card-block">
                                <!--campos-->
                                <div class="form-group">
                                    <input type="button" class="btn btn-info" value="Consultar" onclick="consultarDatos()">
                                </div>
                                <div class="form-group" id="tdTienda4">

                                </div>
                                <div class="form-group table-responsive" id="divXHRCON" style="overflow-y: scroll;">

                                </div>
                                <!--colocamos campos de arrastres-->

                                <!--campos-->
                            </div>
                        </div>
                    </div>
                </form>
                <!--contenido-->
            </div>
        </div>
        <!-- end page 1 content -->

        <div data-role="footer" data-position="fixed">
            <div data-role="navbar" class="table-responsive">
                <ul>
                    <li><a href="#con-mov" class="ui-btn-active ui-state-persist"><i class="icono-menu fas fa-list-alt"></i></a></li>
                    <li><a href="#con-img"><i class="icono-menu far fa-images"></i></a></li>
                    <li><a href="#home"><i class="icono-menu fas fa-tachometer-alt"></i></a></li>
                    <li><a href="#upd-img"><i class="icono-menu fas fa-camera"></i></a></li>
                    <li><a href="#reg-mov"><i class="icono-menu fas fa-cart-plus"></i></a></li>
                </ul>
            </div>
            <!-- /navbar -->
        </div>
        <!-- /footer -->
    </div>
    <!-- /page1 -->

    <!-- Modal -->
    <div class="modal fade" id="resExito" role="dialog">
        <div class="modal-dialog">
            <div class="alert alert-success">
                <strong>&Eacute;xito!</strong> Registro Guardado Exitosamente
            </div>

        </div>
    </div>
    <!-- Modal -->
    <div class="modal fade" id="resError" role="dialog">
        <div class="modal-dialog" id="divErrores">
            <div class="alert alert-danger">
                <strong>Error!</strong> Favor de validar la siguiente informaci&oacute;n
            </div>

        </div>
    </div>

    <script type="text/javascript" id="jqm-trans-disable">
        /* For having a faster transition */
        $(document).on("mobileinit", function() {
            $.mobile.defaultPageTransition = "none";
            $.mobile.defaultDialogTransition = "none";
        });
    </script>
    
    <script language="javascript">
        $(document).ready(function() {
            validarSesion();
            cargarObjetos();
            cargarTienda();
            consultarDatos();
            consultarArrastres();
        });

        
    </script>
    <script type="text/javascript" charset="utf-8">

        // Wait for device API libraries to load
        //
        document.addEventListener("deviceready", onDeviceReady, false);
    
        // device APIs are available
        //
        function onDeviceReady() {
            navigator.geolocation.getCurrentPosition(onSuccess, onError);
        }
    
        // onSuccess Geolocation
        //
        function onSuccess(position) {


            var cmbLat = document.querySelectorAll("[id^=dLatitud");
            var cmbLng = document.querySelectorAll("[id^=dLongitud");

            cmbLat.forEach(function(nodo){
                nodo.value = position.coords.latitude;
            });

            cmbLng.forEach(function(nodo){
                nodo.value = position.coords.longitude;
            });

        }
    
        // onError Callback receives a PositionError object
        //
        function onError(error) {
            alert('code: '    + error.code    + '\n' +
                  'message: ' + error.message + '\n');
        }
    
        </script>
</body>

</html>